// Generated by CoffeeScript 1.6.3
(function() {
  $(document).ready(function() {
    window.drag = function() {
      var $drop, $id, appendnow, organizer, that;
      that = this;
      $drop = this.drop = $("section");
      $id = 1;
      organizer = $("#organize-properties");
      organizer.children().draggable({
        cancel: ".drag-element",
        revert: "invalid",
        helper: "clone",
        cursor: "move"
      });
      $drop.droppable({
        accept: "*",
        hoverClass: "dragging",
        activeClass: "dragging",
        tolerance: 'pointer',
        drop: function(event, ui) {
          var $temp, $theid;
          $temp = $(ui.draggable).clone().attr("id", $id);
          $theid = appendnow($temp, $drop);
          return that.setLayout();
        }
      });
      return appendnow = function($item, $whereto) {
        $id++;
        $item.appendTo($whereto).droppable({
          greedy: true,
          toleance: 'pointer',
          accept: '*',
          drop: function(e, ui) {
            var $temp;
            $temp = ui.draggable.clone();
            console.log($temp);
            return $temp.appendTo(this);
          }
        });
        return $id;
      };
    };
    return drag.prototype.setLayout = function() {
      var builder, length;
      builder = this.drop;
      console.log(builder.children().length);
      if (builder.children().length > 6) {
        builder.children().length = 6;
      }
      console.log(builder.children().length);
      length = Math.floor(12 / (builder.children().length % 7));
      return builder.children().removeClass().addClass('columns large-' + length);
    };
  });

}).call(this);
