// Generated by CoffeeScript 1.6.3
(function() {
  $(document).ready(function() {
    var getSlope;
    window.models = {};
    window.views = {};
    window.collections = {};
    window.propertyLink = $("#property-link").html();
    getSlope = function(y1, y, x1, x) {
      return (y - y1) / (x - x1);
    };
    window.launchModal = function(content) {
      var modal;
      modal = $("<div />").addClass("modal");
      if ($.isArray(content)) {
        _.each(content, function(item) {
          return modal.append(item);
        });
      } else {
        modal.html(content);
      }
      modal.prepend("<div class='close-modal icon'>g</div>");
      $(document.body).addClass("active-modal").append(modal);
      return modal;
    };
    window.launchDraggableModal = function(content, tagname, appendTo) {
      var modal;
      modal = $("<" + (tagname || "div") + "/>").html(content).addClass("draggable-modal");
      modal.draggable({
        start: function(e, ui) {
          return ui.helper.addClass("moved");
        },
        stop: function(e, ui) {
          var snapped, snappedTo;
          snapped = $(this).data('uiDraggable').snapElements;
          return snappedTo = $.map(snapped, function(element) {
            if (element.snapping) {
              return element.item;
            } else {
              return null;
            }
          });
        },
        snap: '.section-builder-wrap:not(:hidden), .sidebar-controls:not(:hidden), .organize-elements:not(:hidden)',
        cancel: '.close-arrow',
        containment: 'body'
      });
      modal.appendTo(appendTo || document.body);
      modal.append($("<div/>").addClass("close-arrow pointer").text("q"));
      return modal;
    };
    $.fn.launchModal = function(content) {
      return this.addClass("modal").prependTo($("body").addClass("active-modal"));
    };
    window.validNumber = function(num) {
      return !isNaN(parseInt(num));
    };
    window.cc = function(msg, color) {
      return console.log("%c" + msg, "color:" + color + ";font-weight:bold;");
    };
    $(this).delegate(".close-modal", "click", function() {
      $(this).closest(".modal").remove();
      return $("body").removeClass("active-modal");
    });
    $(this).delegate(".modal .confirm", "click", function() {
      $(document.body).removeClass("active-modal");
      return $(this).closest(".modal").remove();
    });
    $(this).delegate("[data-switch-text]", "click", function() {
      var $t, currtext, switchtext;
      $t = $(this);
      switchtext = $t.data("switch-text");
      currtext = $t.text();
      $t.text(switchtext);
      return $t.data("switch-text", currtext);
    });
    return $(this).delegate(".close-arrow", "click", function() {
      return $(this).toggleClass("flipped").siblings().toggle();
    });
  });

  $(window).on("resize", function() {
    var ww;
    ww = $(this).width();
    return $(".draggable-modal").each(function() {
      var $t, diff, edge, width;
      $t = $(this);
      width = $t.width();
      edge = $t.offset().left + width;
      diff = edge - ww;
      if (edge > ww) {
        cc($t.offset().left);
        cc($t.offset().left - diff + "px");
        return $t.css({
          left: $t.offset().left - diff + "px"
        });
      }
    });
  });

}).call(this);
